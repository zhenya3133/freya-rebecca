== GIT =================================================================
 M apps/web/scripts/ingest_github_paged.sh
 M apps/web/src/app/api/admin/sql/route.ts
 M apps/web/src/app/api/ingest/github/route.ts
 M apps/web/src/app/api/ingest/url/route.ts
 M apps/web/src/app/api/ingest/youtube/route.ts
 D scripts/ingest_github_paged.sh
?? apps/web/scripts/ci_smoke.sh
?? apps/web/scripts/ingest_many.sh
?? apps/web/scripts/ingest_youtube.sh
?? apps/web/scripts/run_admin_sql.sh
?? apps/web/src/app/api/admin/embed-backfill/
?? apps/web/urls.txt
?? audit-foundation.txt
?? logs/
?? scripts/audit_foundation.sh
?? scripts/bootstrap_roadmap.sh
?? tree.txt

feat/github-ingest

7ac47ad ingest: add PDF+URL flow w/ unchanged detection & backfill; GitHub ingest w/ pagination, includeExt/path filters, dryRun/skipEmbeddings; helper scripts
ae21254 fix(retrieve): drop contract import of clamp; add local clamp + safe defaults for topK/candidateK/minSimilarity
b9b57b0 feat: Implement /api/retrieve endpoint compliance and robustness features
cda5b43 docs(manus): vision, API contract, full manus pack; docker-compose + env example
e058bfb wip: snapshot before stabilization
f0c74ba chore(perms): normalize non-executable file modes
6796af8 chore(restore): restore CI, scripts, docs; mark scripts executable
b84f6dd Merge remote-tracking branch 'origin/feat/retrieve-v2-domain-filter' into chore/repo-clean

== TREE (apps/web) =====================================================
apps/web
├── .editorconfig
├── .env.example
├── .env.local
├── .env.local.example
├── .eslintrc.json
├── .gitignore
├── .ingest_checkpoints
├── .next
│   ├── app-build-manifest.json
│   ├── build-manifest.json
│   ├── cache
│   │   └── .rscinfo
│   ├── fallback-build-manifest.json
│   ├── package.json
│   ├── prerender-manifest.json
│   ├── routes-manifest.json
│   ├── server
│   │   ├── app
│   │   │   └── api
│   │   ├── app-paths-manifest.json
│   │   ├── chunks
│   │   │   ├── [externals]_node:fs_promises_d067aafe._.js
│   │   │   ├── [externals]_node:fs_promises_d067aafe._.js.map
│   │   │   ├── [root-of-the-server]__03645013._.js
│   │   │   ├── [root-of-the-server]__03645013._.js.map
│   │   │   ├── [root-of-the-server]__06295c4d._.js
│   │   │   ├── [root-of-the-server]__06295c4d._.js.map
│   │   │   ├── [root-of-the-server]__14afe40c._.js
│   │   │   ├── [root-of-the-server]__14afe40c._.js.map
│   │   │   ├── [root-of-the-server]__355a7e5b._.js
│   │   │   ├── [root-of-the-server]__355a7e5b._.js.map
│   │   │   ├── [root-of-the-server]__3dc6cf31._.js
│   │   │   ├── [root-of-the-server]__3dc6cf31._.js.map
│   │   │   ├── [root-of-the-server]__44ed951f._.js
│   │   │   ├── [root-of-the-server]__44ed951f._.js.map
│   │   │   ├── [root-of-the-server]__4d153cfd._.js
│   │   │   ├── [root-of-the-server]__4d153cfd._.js.map
│   │   │   ├── [root-of-the-server]__4ef8ceb6._.js
│   │   │   ├── [root-of-the-server]__4ef8ceb6._.js.map
│   │   │   ├── [root-of-the-server]__516719e3._.js
│   │   │   ├── [root-of-the-server]__516719e3._.js.map
│   │   │   ├── [root-of-the-server]__5d714310._.js
│   │   │   ├── [root-of-the-server]__5d714310._.js.map
│   │   │   ├── [root-of-the-server]__5fef9a5f._.js
│   │   │   ├── [root-of-the-server]__5fef9a5f._.js.map
│   │   │   ├── [root-of-the-server]__6fdd5c48._.js
│   │   │   ├── [root-of-the-server]__6fdd5c48._.js.map
│   │   │   ├── [root-of-the-server]__818bd5b5._.js
│   │   │   ├── [root-of-the-server]__818bd5b5._.js.map
│   │   │   ├── [root-of-the-server]__9a5b6797._.js
│   │   │   ├── [root-of-the-server]__9a5b6797._.js.map
│   │   │   ├── [root-of-the-server]__9b7aa630._.js
│   │   │   ├── [root-of-the-server]__9b7aa630._.js.map
│   │   │   ├── [root-of-the-server]__9cf23eb4._.js
│   │   │   ├── [root-of-the-server]__9cf23eb4._.js.map
│   │   │   ├── [root-of-the-server]__a3ec2704._.js
│   │   │   ├── [root-of-the-server]__a3ec2704._.js.map
│   │   │   ├── [root-of-the-server]__b155e635._.js
│   │   │   ├── [root-of-the-server]__b155e635._.js.map
│   │   │   ├── [root-of-the-server]__b765c511._.js
│   │   │   ├── [root-of-the-server]__b765c511._.js.map
│   │   │   ├── [root-of-the-server]__c1477988._.js
│   │   │   ├── [root-of-the-server]__c1477988._.js.map
│   │   │   ├── [root-of-the-server]__cd70de9d._.js
│   │   │   ├── [root-of-the-server]__cd70de9d._.js.map
│   │   │   ├── [root-of-the-server]__d2540469._.js
│   │   │   ├── [root-of-the-server]__d2540469._.js.map
│   │   │   ├── [root-of-the-server]__d255b2d6._.js
│   │   │   ├── [root-of-the-server]__d255b2d6._.js.map
│   │   │   ├── [root-of-the-server]__dc3ae816._.js
│   │   │   ├── [root-of-the-server]__dc3ae816._.js.map
│   │   │   ├── [root-of-the-server]__f286527a._.js
│   │   │   ├── [root-of-the-server]__f286527a._.js.map
│   │   │   ├── [root-of-the-server]__f5454392._.js
│   │   │   ├── [root-of-the-server]__f5454392._.js.map
│   │   │   ├── [root-of-the-server]__ff15cc62._.js
│   │   │   ├── [root-of-the-server]__ff15cc62._.js.map
│   │   │   ├── [turbopack]_runtime.js
│   │   │   ├── [turbopack]_runtime.js.map
│   │   │   ├── _f94b714c._.js
│   │   │   ├── _f94b714c._.js.map
│   │   │   ├── apps_web_src_lib_pg_ts_88ff3eaa._.js
│   │   │   ├── apps_web_src_lib_pg_ts_88ff3eaa._.js.map
│   │   │   ├── node_modules_38ad2be6._.js
│   │   │   ├── node_modules_38ad2be6._.js.map
│   │   │   ├── node_modules_58897eb9._.js
│   │   │   ├── node_modules_58897eb9._.js.map
│   │   │   ├── node_modules_7ae9ad0c._.js
│   │   │   ├── node_modules_7ae9ad0c._.js.map
│   │   │   ├── node_modules_ba12b73b._.js
│   │   │   ├── node_modules_ba12b73b._.js.map
│   │   │   ├── node_modules_bf024e13._.js
│   │   │   ├── node_modules_bf024e13._.js.map
│   │   │   ├── node_modules_d8128759._.js
│   │   │   ├── node_modules_d8128759._.js.map
│   │   │   ├── node_modules_next_2512c0a6._.js
│   │   │   ├── node_modules_next_2512c0a6._.js.map
│   │   │   ├── node_modules_next_6f5b7eea._.js
│   │   │   ├── node_modules_next_6f5b7eea._.js.map
│   │   │   ├── node_modules_next_800aeb7e._.js
│   │   │   ├── node_modules_next_800aeb7e._.js.map
│   │   │   ├── node_modules_next_f5ce9021._.js
│   │   │   ├── node_modules_next_f5ce9021._.js.map
│   │   │   ├── node_modules_next_fa777b4c._.js
│   │   │   ├── node_modules_next_fa777b4c._.js.map
│   │   │   ├── node_modules_node-ensure_index_7f950531.js
│   │   │   ├── node_modules_node-ensure_index_7f950531.js.map
│   │   │   ├── node_modules_pdf-parse_index_f716ad8d.js
│   │   │   ├── node_modules_pdf-parse_index_f716ad8d.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf-parse_30edfd6e.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf-parse_30edfd6e.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_100_build_pdf_71c3c8b3.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_100_build_pdf_71c3c8b3.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_100_build_pdf_worker_52c9fc57.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_100_build_pdf_worker_52c9fc57.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_88_build_pdf_36252b84.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_88_build_pdf_36252b84.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_88_build_pdf_worker_ea871991.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_10_88_build_pdf_worker_ea871991.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_9_426_build_pdf_fe79cad9.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_9_426_build_pdf_fe79cad9.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_9_426_build_pdf_worker_c153a02e.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v1_9_426_build_pdf_worker_c153a02e.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v2_0_550_build_pdf_8d84ce2e.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v2_0_550_build_pdf_8d84ce2e.js.map
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v2_0_550_build_pdf_worker_4a586fdb.js
│   │   │   ├── node_modules_pdf-parse_lib_pdf_js_v2_0_550_build_pdf_worker_4a586fdb.js.map
│   │   │   ├── node_modules_youtube-transcript_dist_youtube-transcript_esm_b1a50c57.js
│   │   │   ├── node_modules_youtube-transcript_dist_youtube-transcript_esm_b1a50c57.js.map
│   │   │   └── ssr
│   │   ├── edge
│   │   │   └── chunks
│   │   ├── interception-route-rewrite-manifest.js
│   │   ├── middleware
│   │   │   └── middleware-manifest.json
│   │   ├── middleware-build-manifest.js
│   │   ├── middleware-manifest.json
│   │   ├── next-font-manifest.js
│   │   ├── next-font-manifest.json
│   │   ├── pages
│   │   │   ├── _app
│   │   │   ├── _app.js
│   │   │   ├── _app.js.map
│   │   │   ├── _document
│   │   │   ├── _document.js
│   │   │   ├── _document.js.map
│   │   │   ├── _error
│   │   │   ├── _error.js
│   │   │   └── _error.js.map
│   │   ├── pages-manifest.json
│   │   ├── server-reference-manifest.js
│   │   └── server-reference-manifest.json
│   ├── static
│   │   ├── chunks
│   │   │   ├── [next]_entry_page-loader_ts_8ccf5f86._.js
│   │   │   ├── [next]_entry_page-loader_ts_8ccf5f86._.js.map
│   │   │   ├── [next]_entry_page-loader_ts_f9f6e84e._.js
│   │   │   ├── [next]_entry_page-loader_ts_f9f6e84e._.js.map
│   │   │   ├── [root-of-the-server]__48b62173._.js
│   │   │   ├── [root-of-the-server]__48b62173._.js.map
│   │   │   ├── [root-of-the-server]__f19be104._.js
│   │   │   ├── [root-of-the-server]__f19be104._.js.map
│   │   │   ├── [turbopack]_browser_dev_hmr-client_hmr-client_ts_5af4a3bc._.js
│   │   │   ├── [turbopack]_browser_dev_hmr-client_hmr-client_ts_61dcf9ba._.js
│   │   │   ├── [turbopack]_browser_dev_hmr-client_hmr-client_ts_61dcf9ba._.js.map
│   │   │   ├── [turbopack]_browser_dev_hmr-client_hmr-client_ts_6aaa83c7._.js
│   │   │   ├── [turbopack]_browser_dev_hmr-client_hmr-client_ts_6aaa83c7._.js.map
│   │   │   ├── apps_web_01f48b92._.js
│   │   │   ├── apps_web_01f48b92._.js.map
│   │   │   ├── apps_web_e69f0d32._.js
│   │   │   ├── apps_web_pages__app_1d999299._.js
│   │   │   ├── apps_web_pages__app_1d999299._.js.map
│   │   │   ├── apps_web_pages__app_5771e187._.js
│   │   │   ├── apps_web_pages__error_5771e187._.js
│   │   │   ├── apps_web_pages__error_74226f38._.js
│   │   │   ├── apps_web_pages__error_74226f38._.js.map
│   │   │   ├── node_modules_@swc_helpers_cjs_8e433861._.js
│   │   │   ├── node_modules_@swc_helpers_cjs_8e433861._.js.map
│   │   │   ├── node_modules_f2979c3a._.js
│   │   │   ├── node_modules_f2979c3a._.js.map
│   │   │   ├── node_modules_next_app_95ea274f.js
│   │   │   ├── node_modules_next_app_95ea274f.js.map
│   │   │   ├── node_modules_next_dist_445d8acf._.js
│   │   │   ├── node_modules_next_dist_445d8acf._.js.map
│   │   │   ├── node_modules_next_dist_7c4b9b2a._.js
│   │   │   ├── node_modules_next_dist_7c4b9b2a._.js.map
│   │   │   ├── node_modules_next_dist_ad6392d3._.js
│   │   │   ├── node_modules_next_dist_ad6392d3._.js.map
│   │   │   ├── node_modules_next_dist_build_polyfills_polyfill-nomodule.js
│   │   │   ├── node_modules_next_dist_client_20b209c9._.js
│   │   │   ├── node_modules_next_dist_client_20b209c9._.js.map
│   │   │   ├── node_modules_next_dist_client_becf32a6._.js
│   │   │   ├── node_modules_next_dist_client_becf32a6._.js.map
│   │   │   ├── node_modules_next_dist_compiled_0f1b9fd4._.js
│   │   │   ├── node_modules_next_dist_compiled_0f1b9fd4._.js.map
│   │   │   ├── node_modules_next_dist_compiled_ca41998d._.js
│   │   │   ├── node_modules_next_dist_compiled_ca41998d._.js.map
│   │   │   ├── node_modules_next_dist_compiled_next-devtools_index_82a36480.js
│   │   │   ├── node_modules_next_dist_compiled_next-devtools_index_82a36480.js.map
│   │   │   ├── node_modules_next_dist_compiled_next-devtools_index_d575f738.js
│   │   │   ├── node_modules_next_dist_compiled_next-devtools_index_d575f738.js.map
│   │   │   ├── node_modules_next_dist_compiled_react-dom_1f56dc06._.js
│   │   │   ├── node_modules_next_dist_compiled_react-dom_1f56dc06._.js.map
│   │   │   ├── node_modules_next_dist_shared_lib_3cbd5cc2._.js
│   │   │   ├── node_modules_next_dist_shared_lib_3cbd5cc2._.js.map
│   │   │   ├── node_modules_next_dist_shared_lib_492fcef6._.js
│   │   │   ├── node_modules_next_dist_shared_lib_492fcef6._.js.map
│   │   │   ├── node_modules_next_error_8c8bf619.js
│   │   │   ├── node_modules_next_error_8c8bf619.js.map
│   │   │   ├── node_modules_react-dom_82bb97c6._.js
│   │   │   ├── node_modules_react-dom_82bb97c6._.js.map
│   │   │   └── pages
│   │   └── development
│   │       ├── _buildManifest.js
│   │       ├── _clientMiddlewareManifest.json
│   │       └── _ssgManifest.js
│   ├── trace
│   └── types
├── .vscode
│   ├── extensions.json
│   └── settings.json
├── Dockerfile
├── Ping-4O.ps1
├── README.md
├── Run-Rag.backup.ps1
├── Run-Rag.ps1
├── Sync-Memory.ps1
├── _sanity_bundle
│   └── .env.redacted
├── agents.prod.json
├── answer.json
├── ask.json
├── docs
│   ├── CHANGELOG.md
│   ├── evals
│   │   └── latest.md
│   └── retrieve-api.md
├── eslint.config.mjs
├── freya-rebecca-v0.4.0.bundle
├── logs
├── middleware.ts
├── migrations
│   └── 2025-08-27_rag_logs.sql
├── next-env.d.ts
├── next.config.mjs
├── package.json
├── patches
│   └── 0001-release-main-29.08.2025.patch
├── public
│   ├── file.svg
│   ├── globe.svg
│   ├── next.svg
│   ├── vercel.svg
│   └── window.svg
├── resp-gpt5.json
├── retrieve_grep_output.txt
├── scripts
│   ├── audit-state.mjs
│   ├── ci_smoke.sh
│   ├── contract
│   │   └── test_retrieve.sh
│   ├── db
│   │   ├── maintenance.sh
│   │   └── maintenance.sql
│   ├── diag
│   │   ├── count_chunks.sql
│   │   ├── count_chunks_ns.ts
│   │   ├── count_memories.sql
│   │   ├── count_memories_ns.ts
│   │   ├── count_ns.sql
│   │   ├── count_ns.ts
│   │   ├── list_columns.sh
│   │   ├── list_columns.sql
│   │   ├── list_columns.ts
│   │   ├── list_tables.sh
│   │   ├── list_tables.sql
│   │   ├── slots_by_ns.ts
│   │   └── top_ns.ts
│   ├── e2e
│   │   └── bootstrap_demo.sh
│   ├── embed_backfill.sh
│   ├── evals
│   │   ├── golden
│   │   │   └── rebecca_army_refs.jsonl
│   │   ├── logs
│   │   │   └── manual_2025-09-22_18-24.log
│   │   ├── run_eval.mjs
│   │   ├── run_eval.ts
│   │   └── sample_cases.jsonl
│   ├── ingest_github.sh
│   ├── ingest_github_paged.sh
│   ├── ingest_many.sh
│   ├── ingest_pdf.sh
│   ├── ingest_pdf_file.sh
│   ├── ingest_readme_pdfs.sh
│   ├── ingest_url.sh
│   ├── ingest_youtube.sh
│   ├── migrate-g0.js
│   ├── migrate.sh
│   ├── migrations
│   │   ├── G0_init.sql
│   │   ├── G5_indexes_upserts.sql
│   │   ├── G6_make_embedding_nullable.sql
│   │   └── g5_backfill_chunks_from_memories.sql
│   ├── retrieve.sh
│   ├── run_admin_sql.sh
│   └── smoke_pdf.sh
├── seed.json
├── seeds
│   ├── agents
│   │   └── rebecca.core.v1.json
│   ├── army
│   │   └── seed.json
│   ├── profiles
│   │   ├── __backup_20250828_194815
│   │   ├── analyst.json
│   │   ├── docs.json
│   │   ├── qa.json
│   │   ├── rag.json
│   │   ├── rebecca.profiles.v1.json
│   │   ├── security.json
│   │   └── toolsmith.json
│   ├── rebecca
│   │   ├── 01-architecture.md
│   │   ├── 02-rag-pipeline.md
│   │   ├── 03-prompts-style.md
│   │   └── 04-kb-curation.md
│   └── refs
│       ├── agents
│       │   ├── autogen.md
│       │   ├── crewai.md
│       │   ├── guardrails.md
│       │   ├── langgraph.md
│       │   ├── llamaindex.md
│       │   └── openai-agents.md
│       └── seed.json
├── src
│   ├── app
│   │   ├── admin
│   │   │   ├── ingest
│   │   │   ├── logs
│   │   │   ├── memory
│   │   │   ├── playground
│   │   │   ├── profiles
│   │   │   └── traces
│   │   ├── api
│   │   │   ├── _archive
│   │   │   ├── admin
│   │   │   ├── agents
│   │   │   ├── db-ping
│   │   │   ├── debug
│   │   │   ├── dev
│   │   │   ├── diag
│   │   │   ├── evals
│   │   │   ├── freya
│   │   │   ├── health
│   │   │   ├── ingest
│   │   │   ├── initiatives
│   │   │   ├── logs
│   │   │   ├── maint
│   │   │   ├── memory
│   │   │   ├── ns
│   │   │   ├── profiles
│   │   │   ├── rag
│   │   │   ├── rebecca
│   │   │   ├── retrieve
│   │   │   └── schema
│   │   ├── chat
│   │   │   └── page.tsx
│   │   ├── favicon.ico
│   │   ├── globals.css
│   │   ├── icon.svg
│   │   ├── layout.tsx
│   │   ├── page.module.css
│   │   ├── page.tsx
│   │   └── playground
│   │       └── page.tsx
│   ├── lib
│   │   ├── admin-auth.ts
│   │   ├── admin-guard.ts
│   │   ├── admin.ts
│   │   ├── adminAuth.ts
│   │   ├── auth.ts
│   │   ├── chunk.ts
│   │   ├── chunking.ts
│   │   ├── contracts.ts
│   │   ├── db.ts
│   │   ├── domain_filter.ts
│   │   ├── embeddings.ts
│   │   ├── env.ts
│   │   ├── guardrails.ts
│   │   ├── hash.ts
│   │   ├── ingest_upsert.ts
│   │   ├── log.ts
│   │   ├── logs.ts
│   │   ├── memories.ts
│   │   ├── namespaces.ts
│   │   ├── ns.ts
│   │   ├── pg.ts
│   │   ├── profile-runtime.ts
│   │   ├── profiles.ts
│   │   ├── rag-core.ts
│   │   ├── rate_limit.ts
│   │   ├── recency.ts
│   │   ├── redact.ts
│   │   ├── retrieval-contract.ts
│   │   ├── retriever.ts
│   │   ├── retriever_v2.ts
│   │   ├── retryFetch.ts
│   │   ├── schemas
│   │   │   └── agent.ts
│   │   ├── similarity.ts
│   │   ├── sleep.ts
│   │   └── suggestNs.ts
│   └── types
│       └── ambient.d.ts
├── tests
│   ├── Smoke-Evals.ps1
│   └── golden.json
├── traces.csv
├── tsconfig.backup.json
├── tsconfig.json
├── tsconfig.tsbuildinfo
└── urls.txt

83 directories, 342 files

== GREP: ключевые файлы RC-v1 ==========================================
apps/web/src/app/api/ingest/github/route.ts:2:import { NextResponse } from "next/server";
apps/web/src/app/api/ingest/github/route.ts:9:export const runtime = "nodejs";
apps/web/src/app/api/ingest/github/route.ts:10:export const dynamic = "force-dynamic";
apps/web/src/app/api/ingest/github/route.ts:169:      return NextResponse.json({ ok: false, stage, error: "ns, owner, repo required" }, { status: 400 });
apps/web/src/app/api/ingest/github/route.ts:210:      return NextResponse.json({
apps/web/src/app/api/ingest/github/route.ts:224:      return NextResponse.json({
apps/web/src/app/api/ingest/github/route.ts:451:    return NextResponse.json({
apps/web/src/app/api/ingest/github/route.ts:467:    return NextResponse.json({ ok: false, stage, error: e?.message || String(e) }, { status: 500 });
apps/web/src/app/api/ingest/pdf/route.ts:2:import { NextResponse } from "next/server";
apps/web/src/app/api/ingest/pdf/route.ts:10:export const runtime = "nodejs";
apps/web/src/app/api/ingest/pdf/route.ts:11:export const dynamic = "force-dynamic";
apps/web/src/app/api/ingest/pdf/route.ts:88:      return NextResponse.json({ ok: false, stage, error: "ns and url are required" }, { status: 400 });
apps/web/src/app/api/ingest/pdf/route.ts:91:      return NextResponse.json({ ok: false, stage, error: "slot must be 'staging'|'prod'" }, { status: 400 });
apps/web/src/app/api/ingest/pdf/route.ts:111:      return NextResponse.json({
apps/web/src/app/api/ingest/pdf/route.ts:124:      return NextResponse.json({
apps/web/src/app/api/ingest/pdf/route.ts:177:    return NextResponse.json({
apps/web/src/app/api/ingest/pdf/route.ts:184:    return NextResponse.json(
apps/web/src/app/api/ingest/pdf/route.ts:192:  return NextResponse.json({ error: "Method Not Allowed" }, { status: 405 });
apps/web/src/app/api/ingest/seed/route.ts:1:import { NextResponse } from "next/server";
apps/web/src/app/api/ingest/seed/route.ts:27:      return NextResponse.json({ ok: false, error: "ns and items[] are required" }, { status: 400 });
apps/web/src/app/api/ingest/seed/route.ts:38:        return NextResponse.json(
apps/web/src/app/api/ingest/seed/route.ts:51:        return NextResponse.json(
apps/web/src/app/api/ingest/seed/route.ts:73:    return NextResponse.json({ ok: true, inserted: rows.length });
apps/web/src/app/api/ingest/seed/route.ts:75:    return NextResponse.json({ ok: false, error: err?.message || String(err), stage: stage.value }, { status: 500 });
apps/web/src/app/api/ingest/url/route.ts:2:import { NextResponse } from "next/server";
apps/web/src/app/api/ingest/url/route.ts:10:export const runtime = "nodejs";
apps/web/src/app/api/ingest/url/route.ts:11:export const dynamic = "force-dynamic";
apps/web/src/app/api/ingest/url/route.ts:68:      return NextResponse.json({ ok: false, error: "ns and urls are required" }, { status: 400 });
apps/web/src/app/api/ingest/url/route.ts:71:      return NextResponse.json({ ok: false, error: "slot must be 'staging'|'prod'" }, { status: 400 });
apps/web/src/app/api/ingest/url/route.ts:111:      return NextResponse.json({
apps/web/src/app/api/ingest/url/route.ts:160:    return NextResponse.json({
apps/web/src/app/api/ingest/url/route.ts:167:    return NextResponse.json(
apps/web/src/app/api/ingest/url/route.ts:175:  return NextResponse.json({ error: "Method Not Allowed" }, { status: 405 });
apps/web/src/app/api/ingest/youtube/route.ts:2:import { NextResponse } from "next/server";
apps/web/src/app/api/ingest/youtube/route.ts:9:export const runtime = "nodejs";
apps/web/src/app/api/ingest/youtube/route.ts:10:export const dynamic = "force-dynamic";
apps/web/src/app/api/ingest/youtube/route.ts:239:      return NextResponse.json({ ok: false, stage, error: "ns required" }, { status: 400 });
apps/web/src/app/api/ingest/youtube/route.ts:243:      return NextResponse.json({ ok: false, stage, error: "video url or id required" }, { status: 400 });
apps/web/src/app/api/ingest/youtube/route.ts:254:      return NextResponse.json({
apps/web/src/app/api/ingest/youtube/route.ts:272:      return NextResponse.json({ ok: false, stage, error: "no transcript available" }, { status: 404 });
apps/web/src/app/api/ingest/youtube/route.ts:285:      return NextResponse.json({
apps/web/src/app/api/ingest/youtube/route.ts:382:    return NextResponse.json({
apps/web/src/app/api/ingest/youtube/route.ts:396:    return NextResponse.json({ ok: false, stage, error: e?.message || String(e) }, { status: 500 });
apps/web/src/app/api/retrieve/route.ts:2:import { NextResponse } from "next/server";
apps/web/src/app/api/retrieve/route.ts:10:export const runtime = "nodejs";
apps/web/src/app/api/retrieve/route.ts:11:export const dynamic = "force-dynamic";
apps/web/src/app/api/retrieve/route.ts:30:      return NextResponse.json(
apps/web/src/app/api/retrieve/route.ts:55:    return NextResponse.json(out, { status: 200 });
apps/web/src/app/api/retrieve/route.ts:57:    return NextResponse.json(
apps/web/src/app/api/retrieve/route.ts:65:  return NextResponse.json({ error: "Method Not Allowed" }, { status: 405 });



== ENV (apps/web/.env.local: только ключевые) ==========================
DATABASE_URL=postgres://rebecca:rebecca@localhost:5432/rebecca?sslmode=disable
X_ADMIN_KEY=rebecca_4b736b115c6c48ce9b93a4d709fdb7f1d894ef4ffb264da0a4e47f76acaa32ff

== DB: схемы и индексы (через docker) ==================================
